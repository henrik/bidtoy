var testApp = angular.module("testApp", [ "ngAnimate" ]);

var db = {
  1: { id: 1, name: "Pelle", snippet: "Allt om Pelle." },
  2: { id: 2, name: "Erik", snippet: "Erik Ã¤r en fiskpinne." },
};

function dbValues() {
  return Object.keys(db).map(function (key) { return db[key]; });
};

testApp.controller("testCtrl", function($scope) {
  $scope.persons = dbValues();

  $scope.viewPerson = function(id) {
    $scope.person = db[id];
  };

  $scope.addPerson = function() {
    var id = parseInt(prompt("ID?", 3), 10);
    var name = prompt("Name?", "Gob");

    db[id] = {
      id: id,
      name: name,
      snippet: "Allt om " + name + "."
    };
    $scope.persons = dbValues();

    console.log("add: %o. %o", id, name);
  };
});
